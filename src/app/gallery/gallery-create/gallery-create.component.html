
<!-------------
  Authors : JSWEBAPP (SANTOSH)
  Website : http://jswebapp.com/
  App Name : School Managment App With Angular 14
  This App Template Source code is licensed as per the
  terms found in the Website http://jswebapp.com/license
  Copyright and Good Faith Purchasers Â© 2022-present JSWEBAPP.
  Youtube : youtube.com/@jswebapp 
  ----------->
  <div class="row box">
    <div class="col-md-12 ">
        <h1 class="text-centerl text-muted">ADD IMAGE</h1>
        <hr >

        <form class="row g-3 mt-5needs-validation"
        #galleryForm="ngForm"        novalidate >      

        <div class="col-md-3">
            <label for="galleryTitle"
                   [ngClass]="{ 'text-danger': galleryTitle.touched && galleryTitle.invalid , 'text-success': galleryTitle.touched && galleryTitle.valid  }"
                   class="form-label lbl">Imgae Title</label>
            <input type="text"
                   class="form-control "
                   id="galleryTitle"
                   name="galleryTitle"
                   [(ngModel)]="gallery.galleryTitle"
                   #galleryTitle="ngModel"
                   required
                   [ngClass]="{ 'is-invalid': galleryTitle.touched && galleryTitle.invalid , 'is-valid': galleryTitle.touched && galleryTitle.valid  }">
            <div class="valid-feedback">
                Looks good!
            </div>
            <div class="invalid-feedback">
                Please provide a Batch Name
            </div>
<hr>
            <img class="img-fluid myImg" src="{{croppedImage }}" />
        </div>
           

        <div class="col-md-3 ">
            <h5 class="text-center mt-4 add-change-img" (click)="lgModal?.show()">+ Add /Change Image</h5>
        </div>
        </form>
        
    </div>
</div>


<div bsModal #lgModal="bs-modal" class="modal fade" tabindex="-1"
     role="dialog" aria-labelledby="dialog-sizes-name1">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header bg-danger text-white">
        <input type="file"
        (change)="fileChangeEvent($event)" />
        <button type="button" class="btn-close close pull-right" (click)="lgModal.hide()" aria-label="Close">
          <span aria-hidden="true" class="visually-hidden">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="row">
            <div class="col-md-12 mb-5 d-flex justify-content-center" *ngIf="imageChangedEvent">
                <div class="btn-group" role="group" aria-label="Basic outlined example">
                    <button type="button" class="btn btn-outline-primary " (click)="rotate()" [ngClass]="rotateStatus ? 'active' : ''">Rotate</button>
                    <button type="button" class="btn btn-outline-primary " (click)="flipHorizontal()" [ngClass]="flipHorizontalStatus ? 'active' : ''">FlipX</button>
                    <button type="button" class="btn btn-outline-primary " (click)="flipVertical()" [ngClass]="flipVerticalStatus ? 'active' : ''">FlipY</button>
                    <button type="button" class="btn btn-outline-danger "(click)="discardChanges()" [ngClass]="discardChangesStatus ? 'active' : ''">Discard</button>
                  </div>
            </div>
            <div class="col-md-12">
                <image-cropper [imageChangedEvent]="imageChangedEvent"
                #cropper
                [maintainAspectRatio]="true"
                [aspectRatio]="6 / 4"
                format="png"
                [maintainAspectRatio]=" true"
                [containWithinAspectRatio]="true"
                [cropperMinWidth]="5"
                [cropperMinHeight]="5"
                [roundCropper]="false"
                [canvasRotation]="0"
                (imageCropped)="imageCropped($event)"
                (imageLoaded)="imageLoaded()"
                (cropperReady)="cropperReady()"
                [hideResizeSquares]="false"
                [transform]="transform"
                (loadImageFailed)="loadImageFailed()"></image-cropper>
            </div>
            <div class="col-md-12 mt-5 d-flex justify-content-center">
                <img [src]="croppedImage"
             *ngIf="imageChangedEvent"
             class="img-fluid" />
            </div>
            <div class="col-md-12 mt-5 d-flex justify-content-center">
              <button type="button" class="btn btn-danger" (click)="saveImage()">Crop Image</button>
            </div>
        </div>
      </div>
    </div>
  </div>
</div>
